{
  "id": "ecos-type",
  "formKey": "module_model/type",
  "title": {
    "en": "Type form"
  },
  "description": {},
  "customModule": null,
  "typeRef": "emodel/type@type",
  "width": "extra-lg",
  "i18n": null,
  "definition": {
    "components": [
      {
        "scrollableContent": true,
        "key": "panel3",
        "type": "panel",
        "components": [
          {
            "components": [
              {
                "label": "Main",
                "key": "main",
                "components": [
                  {
                    "columns": [
                      {
                        "components": [
                          {
                            "defaultValue": "",
                            "type": "textfield",
                            "key": "moduleId",
                            "validate": {
                              "required": true
                            },
                            "label": "id",
                            "input": true
                          },
                          {
                            "type": "selectJournal",
                            "journalId": "ecos-types",
                            "key": "parentRef",
                            "label": "Parent",
                            "presetFilterPredicatesJs": null,
                            "input": true
                          },
                          {
                            "hideLabel": true,
                            "columns": [
                              {
                                "components": [
                                  {
                                    "type": "selectJournal",
                                    "journalId": "ecos-forms",
                                    "key": "formRef",
                                    "label": "Form",
                                    "input": true
                                  }
                                ],
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "index": 0,
                                "md": 8
                              },
                              {
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "index": 1,
                                "components": [
                                  {
                                    "label": "Inherit Form",
                                    "labelPosition": "",
                                    "key": "inheritForm",
                                    "type": "checkbox",
                                    "input": true
                                  }
                                ],
                                "md": 4
                              }
                            ],
                            "key": "columns",
                            "type": "columns",
                            "input": false
                          },
                          {
                            "label": "Journal",
                            "journalId": "ecos-journals",
                            "key": "journalRef",
                            "type": "selectJournal",
                            "input": true
                          },
                          {
                            "label": "Number template",
                            "journalId": "number-templates",
                            "key": "numTemplateRef",
                            "type": "selectJournal",
                            "input": true
                          },
                          {
                            "label": "Inherit number template",
                            "key": "inheritNumTemplate",
                            "type": "checkbox",
                            "input": true
                          },
                          {
                            "label": "Edit config",
                            "action": "custom",
                            "state": "",
                            "showValidations": false,
                            "custom": "var ownerId = Math.random().toString();\nvar currentRecord = Citeck.Records.get(instance.options.recordId);\n\nvar configFormRef = data.configFormRef;\nif (Array.isArray(configFormRef)) {\n    configFormRef = configFormRef[0];\n}\n\nif (!configFormRef && data.parent) {\n    configFormRef = Citeck.Records.get(data.parent).load('inhConfigFormRef?id', true);\n}\n\nPromise.all([configFormRef, currentRecord.load('config?json')])\n    .then(function(formAndConfig) {\n\n        var formRef = formAndConfig[0];\n        var config = formAndConfig[1];\n\n        if (formRef == null) {\n            throw new Error(\"Config form is not set\");\n        }\n\n        if (!config) {\n            config = {};\n        }\n\n        var configRecord = Citeck.Records.create(config, ownerId);\n\n        Citeck.forms.eform(configRecord.id, {\n            params: {\n                formId: formRef,\n                onSubmit: function (record) {\n                    var data = record.toJson().attributes;\n                    var resData = {};\n                    for (var key in data) {\n                        if (key[0] !== '_' && key !== 'pendingUpdate') {\n                            resData[key] = data[key];\n                        }\n                    }\n                    currentRecord.att(\"config?json\", resData);\n                    Citeck.Records.release(configRecord.id, ownerId);\n                },\n                onCancel: function () {\n                    Citeck.Records.release(configRecord.id, ownerId);\n                },\n                saveOnSubmit: false\n            },\n            class: 'ecos-modal_width-lg',\n            isBigHeader: true\n        });\n    })",
                            "block": true,
                            "key": "editconfig",
                            "type": "button",
                            "input": true
                          },
                          {
                            "label": "Config form",
                            "journalId": "ecos-forms",
                            "key": "configFormRef",
                            "type": "selectJournal",
                            "input": true
                          }
                        ],
                        "type": "column",
                        "key": "column",
                        "index": 0,
                        "conditional": {
                          "show": null,
                          "when": null
                        },
                        "input": false
                      },
                      {
                        "index": 1,
                        "type": "column",
                        "key": "column",
                        "components": [
                          {
                            "label": "Name",
                            "key": "name",
                            "type": "mlText",
                            "input": true
                          },
                          {
                            "label": "Display Name Template",
                            "key": "dispNameTemplate",
                            "type": "mlText",
                            "input": true
                          },
                          {
                            "label": "Description",
                            "key": "description",
                            "type": "mlTextarea",
                            "input": true
                          },
                          {
                            "type": "selectJournal",
                            "journalId": "ui-actions",
                            "reorder": false,
                            "key": "actions",
                            "multiple": true,
                            "label": "Actions",
                            "input": true
                          },
                          {
                            "type": "checkbox",
                            "key": "inheritActions",
                            "label": "Inherit actions",
                            "input": true
                          },
                          {
                            "label": "Attributes",
                            "keyLabel": "",
                            "key": "attributes",
                            "type": "datamap",
                            "valueComponent": {
                              "type": "textfield",
                              "key": "value",
                              "label": "Value",
                              "defaultValue": "Value",
                              "input": true,
                              "conditional": {
                                "show": null,
                                "when": null,
                                "eq": "",
                                "json": ""
                              }
                            },
                            "input": true
                          },
                          {
                            "label": "Source ID",
                            "defaultValue": "",
                            "key": "sourceId",
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "conditional": {
                          "show": null,
                          "when": null
                        },
                        "input": false
                      }
                    ],
                    "key": "columns4",
                    "type": "columns",
                    "tab": 0,
                    "input": false
                  }
                ]
              },
              {
                "label": "Create",
                "key": "createVariants",
                "components": [
                  {
                    "label": {
                      "en": "Default create",
                      "ru": "Создание по умолчанию"
                    },
                    "labelPosition": "",
                    "key": "defaultCreateVariant",
                    "defaultValue": true,
                    "type": "checkbox",
                    "input": true
                  },
                  {
                    "label": "Create",
                    "hideLabel": true,
                    "disableAddingRemovingRows": false,
                    "defaultOpen": false,
                    "layoutFixed": false,
                    "enableRowGroups": false,
                    "multiple": true,
                    "reorder": true,
                    "defaultValue": [
                      {
                        "id": "",
                        "textField": "",
                        "container": {},
                        "attribute": "",
                        "name": {},
                        "target": "",
                        "direction": "TARGET",
                        "id2": "",
                        "attribute2": "",
                        "name3": {
                          "ru": "",
                          "en": ""
                        },
                        "recordRef": "",
                        "formRef": "",
                        "selectJournal": "",
                        "value": "Value",
                        "attributes": {},
                        "mlText": {
                          "ru": "",
                          "en": ""
                        },
                        "submit4": false,
                        "submit8": false
                      }
                    ],
                    "validate": {
                      "minLength": "",
                      "maxLength": ""
                    },
                    "key": "createVariants",
                    "type": "datagrid",
                    "components": [
                      {
                        "key": "panel5",
                        "type": "panel",
                        "components": [
                          {
                            "label": "Id",
                            "defaultValue": "",
                            "key": "id",
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "row": "0-0",
                        "input": false
                      },
                      {
                        "key": "panel7",
                        "type": "panel",
                        "components": [
                          {
                            "label": "Name",
                            "key": "name",
                            "type": "mlText",
                            "input": true
                          }
                        ],
                        "row": "0-1",
                        "input": false
                      },
                      {
                        "key": "panel6",
                        "type": "panel",
                        "components": [
                          {
                            "label": "Form",
                            "journalId": "ecos-forms",
                            "key": "formRef",
                            "type": "selectJournal",
                            "customPredicateJs": null,
                            "presetFilterPredicatesJs": null,
                            "input": true,
                            "source": {
                              "custom": {
                                "columns": []
                              },
                              "type": "journal"
                            }
                          }
                        ],
                        "row": "0-2",
                        "input": false
                      },
                      {
                        "label": {
                          "ru": "Panel"
                        },
                        "key": "panel10",
                        "type": "panel",
                        "input": false,
                        "components": [
                          {
                            "label": {
                              "en": "Additional",
                              "ru": "Дополнительно"
                            },
                            "action": "custom",
                            "state": "",
                            "showValidations": false,
                            "custom": "var currentRow = row;\nvar atts = [\n  ['attributes', {}], \n  ['formOptions', {}], \n  ['postActionRef', ''], \n  ['properties', {}],\n  ['sourceId', []]\n];\nvar formData = {};\nfor (var key of atts) {\n  formData[key[0]] = row[key[0]] || key[1];\n}\nCiteck.EcosFormUtils.getFormById('uiserv/form@create-variant-form', {\n    definition: 'definition?json'\n}).then(function(formConfig) {\n    \n    Citeck.Dialogs.showFormDialog({\n        title: 'Create variant',\n        showDefaultButtons: true,\n        formDefinition: formConfig.definition,\n        formData: formData,\n        onSubmit: submission => {\n            var data = submission.data || {};\n\n\t\t\tfor (var key of atts) {\n\t\t\t  currentRow[key[0]] = data[key[0]] || key[1];\n\t\t\t}\n        }\n    })\n    \n});",
                            "key": "submit8",
                            "type": "button",
                            "input": true,
                            "row": "0-3"
                          },
                          {
                            "label": {
                              "ru": "attributes"
                            },
                            "key": "attributes",
                            "properties": {
                              "dataType": "json"
                            },
                            "type": "hidden",
                            "input": true
                          },
                          {
                            "label": {
                              "ru": "formOptions"
                            },
                            "key": "formOptions",
                            "properties": {
                              "dataType": "json"
                            },
                            "type": "hidden",
                            "input": true
                          },
                          {
                            "label": {
                              "ru": "properties"
                            },
                            "key": "properties",
                            "properties": {
                              "dataType": "json"
                            },
                            "type": "hidden",
                            "input": true
                          },
                          {
                            "label": {
                              "ru": "postActionRef"
                            },
                            "key": "postActionRef",
                            "type": "hidden",
                            "input": true
                          },
                          {
                            "label": {
                              "ru": "sourceId"
                            },
                            "key": "sourceId",
                            "type": "hidden",
                            "input": true
                          }
                        ],
                        "row": "0-3"
                      }
                    ],
                    "tab": 1,
                    "addAnother": "",
                    "addAnotherPosition": "bottom",
                    "removePlacement": "col",
                    "input": true
                  }
                ]
              },
              {
                "label": "Associations",
                "key": "associations",
                "components": [
                  {
                    "label": "Associations",
                    "hideLabel": true,
                    "disableAddingRemovingRows": true,
                    "defaultOpen": false,
                    "layoutFixed": false,
                    "enableRowGroups": false,
                    "multiple": true,
                    "reorder": true,
                    "defaultValue": [
                      {
                        "id": "",
                        "textField": "",
                        "container": {},
                        "attribute": "",
                        "name": {},
                        "target": "",
                        "direction": "TARGET",
                        "mlText": {
                          "ru": "",
                          "en": ""
                        }
                      }
                    ],
                    "validate": {
                      "minLength": "",
                      "maxLength": ""
                    },
                    "key": "associations",
                    "type": "datagrid",
                    "components": [
                      {
                        "key": "panel",
                        "type": "panel",
                        "components": [
                          {
                            "label": "Id",
                            "defaultValue": "",
                            "key": "id",
                            "type": "textfield",
                            "input": true
                          },
                          {
                            "label": "Attribute",
                            "defaultValue": "",
                            "key": "attribute",
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "row": "0-0",
                        "input": false
                      },
                      {
                        "key": "panel2",
                        "type": "panel",
                        "components": [
                          {
                            "label": "Name",
                            "key": "name",
                            "type": "mlText",
                            "input": true
                          }
                        ],
                        "row": "0-1",
                        "input": false
                      },
                      {
                        "key": "panel4",
                        "type": "panel",
                        "components": [
                          {
                            "label": "Target",
                            "journalId": "ecos-types",
                            "key": "target",
                            "type": "selectJournal",
                            "customPredicateJs": null,
                            "presetFilterPredicatesJs": null,
                            "input": true
                          },
                          {
                            "label": "Direction",
                            "dataSrc": "values",
                            "data": {
                              "values": [
                                {
                                  "label": "Target",
                                  "value": "TARGET"
                                },
                                {
                                  "label": "Source",
                                  "value": "SOURCE"
                                },
                                {
                                  "label": "Both",
                                  "value": "BOTH"
                                }
                              ]
                            },
                            "defaultValue": "TARGET",
                            "key": "direction",
                            "type": "ecosSelect",
                            "input": true
                          }
                        ],
                        "row": "0-2",
                        "input": false
                      }
                    ],
                    "tab": 2,
                    "input": true
                  }
                ]
              },
              {
                "label": "Attributes",
                "key": "attributes",
                "components": [
                  {
                    "title": "Attributes",
                    "scrollableContent": true,
                    "collapsible": true,
                    "key": "panel8",
                    "type": "panel",
                    "input": false,
                    "components": [
                      {
                        "label": "Attributes",
                        "hideLabel": true,
                        "disableAddingRemovingRows": false,
                        "addAnother": "",
                        "addAnotherPosition": "bottom",
                        "removePlacement": "col",
                        "defaultOpen": false,
                        "layoutFixed": false,
                        "enableRowGroups": false,
                        "multiple": true,
                        "reorder": true,
                        "defaultValue": [
                          {
                            "id2": "",
                            "id": "",
                            "name2": {},
                            "name": {},
                            "submit3": false,
                            "submit4": false,
                            "type": "TEXT",
                            "submit": false,
                            "submit6": false,
                            "submit7": false,
                            "submit8": false,
                            "container": {
                              "submit7": false
                            },
                            "submit9": false,
                            "multiple": false,
                            "ecosSelect": "",
                            "select": "",
                            "multiple2": false,
                            "mandatory": false
                          }
                        ],
                        "validate": {
                          "minLength": "",
                          "maxLength": ""
                        },
                        "key": "modelAttributes",
                        "type": "datagrid",
                        "input": true,
                        "components": [
                          {
                            "label": {
                              "ru": "Columns"
                            },
                            "columns": [
                              {
                                "components": [
                                  {
                                    "label": "Id",
                                    "defaultValue": "",
                                    "validate": {
                                      "pattern": "(^$|[_a-zA-Z][_\\w-.:]*)"
                                    },
                                    "key": "id",
                                    "type": "textfield",
                                    "input": true
                                  }
                                ],
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "index": 0,
                                "md": 2
                              },
                              {
                                "index": 1,
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "components": [
                                  {
                                    "label": "Name",
                                    "key": "name",
                                    "type": "mlText",
                                    "input": true,
                                    "row": "0-1"
                                  }
                                ],
                                "md": 3
                              },
                              {
                                "index": 2,
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "components": [
                                  {
                                    "label": "Type            ",
                                    "dataSrc": "values",
                                    "data": {
                                      "values": [
                                        {
                                          "label": "Text",
                                          "value": "TEXT"
                                        },
                                        {
                                          "label": "ML Text",
                                          "value": "MLTEXT"
                                        },
                                        {
                                          "label": "Person",
                                          "value": "PERSON"
                                        },
                                        {
                                          "label": "Group",
                                          "value": "AUTHORITY_GROUP"
                                        },
                                        {
                                          "label": "Authority",
                                          "value": "AUTHORITY"
                                        },
                                        {
                                          "label": "Association",
                                          "value": "ASSOC"
                                        },
                                        {
                                          "label": "Number",
                                          "value": "NUMBER"
                                        },
                                        {
                                          "label": "Boolean",
                                          "value": "BOOLEAN"
                                        },
                                        {
                                          "label": "Date",
                                          "value": "DATE"
                                        },
                                        {
                                          "label": "DateTime",
                                          "value": "DATETIME"
                                        },
                                        {
                                          "label": "Content",
                                          "value": "CONTENT"
                                        }
                                      ]
                                    },
                                    "defaultValue": "TEXT",
                                    "key": "type",
                                    "type": "ecosSelect",
                                    "input": true,
                                    "row": "0-2"
                                  },
                                  {
                                    "label": {
                                      "ru": "Настроить",
                                      "en": "Setup"
                                    },
                                    "action": "custom",
                                    "state": "",
                                    "showValidations": false,
                                    "custom": "var currentRow = row;\nvar config = row.config || {}; \nvar formData = config;\n\nCiteck.EcosFormUtils.getFormById('uiserv/form@att-type-' + row.type + '-form', {\n    definition: 'definition?json'\n}).then(function(formConfig) {\n    \n    var inputs = Citeck.EcosFormUtils.getFormInputs(formConfig.definition);\n\n    Citeck.Dialogs.showFormDialog({\n        title: 'Attribute type config',\n        showDefaultButtons: true,\n        formDefinition: formConfig.definition,\n        formData: formData,\n        onSubmit: submission => {\n            var data = submission.data || {};\n            var configData = {};\n            for (var i in inputs) {\n                var att = inputs[i].attribute;\n                configData[att] = data[att];\n            }\n            currentRow.config = configData;\n        }\n    })\n    \n});",
                                    "block": true,
                                    "key": "submit6",
                                    "type": "button",
                                    "input": true,
                                    "row": "0-3"
                                  },
                                  {
                                    "label": {
                                      "ru": "config"
                                    },
                                    "key": "config",
                                    "properties": {
                                      "dataType": "json"
                                    },
                                    "type": "hidden",
                                    "input": true
                                  }
                                ],
                                "md": 2
                              },
                              {
                                "index": 3,
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "components": [
                                  {
                                    "label": {
                                      "ru": "Множественный",
                                      "en": "Multiple"
                                    },
                                    "labelPosition": "left-left",
                                    "key": "multiple",
                                    "type": "checkbox",
                                    "input": true,
                                    "row": "0-5"
                                  },
                                  {
                                    "label": {
                                      "ru": "Обязательный",
                                      "en": "Mandatory"
                                    },
                                    "labelPosition": "left-left",
                                    "key": "mandatory",
                                    "type": "checkbox",
                                    "input": true,
                                    "row": "0-5"
                                  }
                                ],
                                "md": 3
                              },
                              {
                                "index": 4,
                                "type": "column",
                                "input": false,
                                "key": "column",
                                "components": [
                                  {
                                    "label": "Permissions",
                                    "hideLabel": true,
                                    "action": "custom",
                                    "state": "",
                                    "showValidations": false,
                                    "custom": "\nvar mapToSingleLang = function (value) {\n  return {\n    id: value.id,\n    name: Citeck.helpers.getMLValue(value.name)\n  };\n};\n\nvar typeRef = 'emodel/type@' + data.moduleId;\nvar customProps = {\n  roles: (data.modelRoles || []).map(mapToSingleLang),\n  statuses: (data.modelStatuses || []).map(mapToSingleLang),\n  attributeName: Citeck.helpers.getMLValue(row.name)\n};\n\nvar typeDispName = Citeck.helpers.getMLValue(data.name);\nif (typeDispName) {\n\tcustomProps.typeDispName = typeDispName;\n}\n\nCiteck.TypePermissionsService.editTypeAttPermissions(\n  typeRef, \n  row.id, \n  customProps\n)",
                                    "leftIcon": "icon-decision-tables",
                                    "block": true,
                                    "dataGridLabel": false,
                                    "key": "submit3",
                                    "type": "button",
                                    "input": true,
                                    "row": "0-4"
                                  },
                                  {
                                    "label": {
                                      "en": " "
                                    },
                                    "removeIndents": true,
                                    "action": "custom",
                                    "state": "",
                                    "showValidations": false,
                                    "custom": "var currentRow = row;\nvar computed = row.computed || {}; \nvar computedType = computed.type || 'NONE';\nvar formData = {\n    type: computedType,\n    storingType: computed.storingType || 'NONE'\n};\nformData[computedType + '_config'] = computed.config || {};\n\n\nCiteck.EcosFormUtils.getFormById('uiserv/form@computed-attribute-form', {\n    definition: 'definition?json'\n}).then(function(formConfig) {\n    \n    Citeck.Dialogs.showFormDialog({\n        title: 'Computed attribute',\n        showDefaultButtons: true,\n        formDefinition: formConfig.definition,\n        formData: formData,\n        onSubmit: submission => {\n            var data = submission.data || {};\n\n            currentRow.computed = {\n                type: data.type,\n                storingType: data.storingType,\n                config: data[data.type + '_config']\n            }\n        }\n    })\n    \n});",
                                    "leftIcon": "icon-items",
                                    "block": true,
                                    "key": "submit7",
                                    "type": "button",
                                    "input": true
                                  },
                                  {
                                    "label": {
                                      "ru": "computed"
                                    },
                                    "key": "computed",
                                    "properties": {
                                      "dataType": "json"
                                    },
                                    "type": "hidden",
                                    "input": true
                                  }
                                ],
                                "md": 2
                              }
                            ],
                            "key": "columns5",
                            "type": "columns",
                            "input": false,
                            "row": "0-0"
                          }
                        ],
                        "tab": 3
                      }
                    ],
                    "collapsed": false,
                    "tab": 3
                  },
                  {
                    "title": "Type Permissions",
                    "collapsible": true,
                    "key": "panel9",
                    "type": "panel",
                    "input": false,
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "Edit Permissions",
                                "action": "custom",
                                "block": true,
                                "key": "submit11",
                                "type": "button",
                                "input": true,
                                "showValidations": false,
                                "state": "",
                                "custom": "var mapToSingleLang = function (value) {\n  return {\n    id: value.id,\n    name: Citeck.helpers.getMLValue(value.name)\n  };\n};\n\nvar typeRef = 'emodel/type@' + data.moduleId;\nvar customProps = {\n  roles: (data.modelRoles || []).map(mapToSingleLang),\n  statuses: (data.modelStatuses || []).map(mapToSingleLang)\n};\n\nvar typeDispName = Citeck.helpers.getMLValue(data.name);\nif (typeDispName) {\n\tcustomProps.typeDispName = typeDispName;\n}\n\nCiteck.TypePermissionsService.editTypePermissions(\n  typeRef,\n  customProps\n);"
                              }
                            ],
                            "md": 4,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "index": 0
                          },
                          {
                            "md": 4,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "index": 1,
                            "components": [
                              {
                                "label": "Download Permissions",
                                "action": "custom",
                                "state": "",
                                "showValidations": false,
                                "custom": "var mapToSingleLang = function (value) {\n  return {\n    id: value.id,\n    name: Citeck.helpers.getMLValue(value.name)\n  };\n};\n\nvar typeRef = 'emodel/type@' + data.moduleId;\nvar roles = (data.modelRoles || []).map(mapToSingleLang);\nvar statuses = (data.modelStatuses || []).map(mapToSingleLang);\nvar attributes = (data.modelAttributes || []).map(mapToSingleLang);\n\nCiteck.TypePermissionsService.downloadPermissionsConfig(typeRef, roles, statuses, attributes);",
                                "block": true,
                                "key": "submit11",
                                "type": "button",
                                "input": true
                              }
                            ]
                          },
                          {
                            "md": 4,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "index": 2,
                            "components": [
                              {
                                "label": "Delete permissions",
                                "action": "custom",
                                "state": "",
                                "showValidations": false,
                                "custom": "var typeRef = 'emodel/type@' + data.moduleId;\nCiteck.TypePermissionsService.deletePermissionsConfig(typeRef);",
                                "block": true,
                                "key": "submit11",
                                "type": "button",
                                "input": true
                              }
                            ]
                          }
                        ],
                        "key": "columns6",
                        "type": "columns",
                        "input": false
                      }
                    ],
                    "collapsed": false,
                    "tab": 3
                  }
                ]
              },
              {
                "label": "Roles",
                "key": "roles",
                "components": [
                  {
                    "label": "Roles",
                    "hideLabel": true,
                    "disableAddingRemovingRows": false,
                    "addAnother": "",
                    "addAnotherPosition": "bottom",
                    "removePlacement": "col",
                    "defaultOpen": false,
                    "layoutFixed": false,
                    "enableRowGroups": false,
                    "multiple": true,
                    "reorder": true,
                    "defaultValue": [
                      {
                        "id2": "",
                        "id": "",
                        "name2": {},
                        "name": {},
                        "submit3": false,
                        "submit4": false,
                        "assignees": [],
                        "attribute2": "",
                        "attribute": ""
                      }
                    ],
                    "validate": {
                      "minLength": "",
                      "maxLength": ""
                    },
                    "key": "modelRoles",
                    "type": "datagrid",
                    "input": true,
                    "components": [
                      {
                        "label": "Id",
                        "defaultValue": "",
                        "validate": {
                          "pattern": "(^$|[_a-zA-Z][_\\w-.:]*)"
                        },
                        "key": "id",
                        "type": "textfield",
                        "input": true,
                        "row": "0-0"
                      },
                      {
                        "label": "Name",
                        "key": "name",
                        "type": "mlText",
                        "input": true,
                        "row": "0-1"
                      },
                      {
                        "label": "Assignees",
                        "multiple": true,
                        "reorder": false,
                        "dataType": "authority",
                        "key": "assignees",
                        "type": "selectOrgstruct",
                        "input": true,
                        "row": "0-2"
                      },
                      {
                        "label": "Attribute",
                        "dataSrc": "custom",
                        "data": {
                          "custom": "values = (data['modelAttributes'] || []).filter(att => {\n  return !!att.id;\n}).map(function(att) {\n  return {\n    value: att.id,\n    label: Citeck.helpers.getMLValue(att.name)\n  };\n});\n\n"
                        },
                        "key": "attribute",
                        "type": "ecosSelect",
                        "input": true,
                        "row": "0-3"
                      }
                    ],
                    "tab": 4
                  }
                ]
              },
              {
                "label": "Statuses",
                "key": "statuses",
                "components": [
                  {
                    "label": "Statuses",
                    "hideLabel": true,
                    "disableAddingRemovingRows": false,
                    "addAnother": "",
                    "addAnotherPosition": "bottom",
                    "removePlacement": "col",
                    "defaultOpen": false,
                    "layoutFixed": false,
                    "enableRowGroups": false,
                    "multiple": true,
                    "reorder": true,
                    "defaultValue": [
                      {
                        "id2": "",
                        "id": "",
                        "name2": {},
                        "name": {},
                        "submit3": false,
                        "submit4": false,
                        "id3": "",
                        "name3": {},
                        "submit5": false
                      }
                    ],
                    "validate": {
                      "minLength": "",
                      "maxLength": ""
                    },
                    "key": "modelStatuses",
                    "type": "datagrid",
                    "input": true,
                    "components": [
                      {
                        "label": "Id",
                        "defaultValue": "",
                        "validate": {
                          "pattern": "(^$|[_a-zA-Z][_\\w-.:]*)"
                        },
                        "key": "id",
                        "type": "textfield",
                        "input": true,
                        "row": "0-0"
                      },
                      {
                        "label": "Name",
                        "key": "name",
                        "type": "mlText",
                        "input": true,
                        "row": "0-1"
                      },
                      {
                        "label": "Settings",
                        "action": "custom",
                        "state": "",
                        "key": "submit5",
                        "type": "button",
                        "input": true,
                        "showValidations": false,
                        "custom": "alarm(\"SETTINGS\")",
                        "row": "0-2"
                      }
                    ],
                    "tab": 5
                  }
                ]
              },
              {
                "label": "Documents Library",
                "key": "documentsLibrary",
                "components": [
                  {
                    "hideLabel": true,
                    "columns": [
                      {
                        "components": [
                          {
                            "label": "Enabled",
                            "labelPosition": "",
                            "key": "docLibEnabled",
                            "type": "checkbox",
                            "input": true
                          }
                        ],
                        "md": 4,
                        "type": "column",
                        "input": false,
                        "key": "column",
                        "index": 0
                      },
                      {
                        "md": 4,
                        "type": "column",
                        "input": false,
                        "key": "column",
                        "index": 1,
                        "components": [
                          {
                            "label": "Folder Type",
                            "journalId": "ecos-types",
                            "key": "docLibDirTypeRef",
                            "conditional": {
                              "show": "true",
                              "when": "docLibEnabled",
                              "eq": "true"
                            },
                            "type": "selectJournal",
                            "input": true,
                            "source": {
                              "custom": {
                                "columns": []
                              },
                              "type": "journal"
                            }
                          }
                        ]
                      },
                      {
                        "md": 4,
                        "type": "column",
                        "input": false,
                        "key": "column",
                        "index": 2,
                        "components": [
                          {
                            "label": "File Types",
                            "multiple": true,
                            "journalId": "ecos-types",
                            "source": {
                              "type": "journal",
                              "custom": {
                                "columns": []
                              }
                            },
                            "key": "docLibFileTypeRefs",
                            "conditional": {
                              "show": "true",
                              "when": "docLibEnabled",
                              "eq": "true"
                            },
                            "type": "selectJournal",
                            "input": true,
                            "reorder": false
                          }
                        ]
                      }
                    ],
                    "key": "columns3",
                    "type": "columns",
                    "input": false
                  }
                ]
              }
            ],
            "key": "tabs",
            "type": "tabs",
            "input": false
          }
        ],
        "input": false
      },
      {
        "columns": [
          {
            "type": "column",
            "md": 3,
            "index": 0,
            "components": [
              {
                "type": "button",
                "action": "event",
                "block": true,
                "state": "",
                "showValidations": false,
                "event": "cancel",
                "key": "submit2",
                "label": "Cancel",
                "conditional": {
                  "show": null,
                  "when": null
                },
                "input": true
              }
            ],
            "key": "column",
            "conditional": {
              "show": null,
              "when": null
            },
            "input": false
          },
          {
            "type": "column",
            "index": 1,
            "components": [],
            "key": "column",
            "conditional": {
              "show": null,
              "when": null
            },
            "input": false,
            "md": 3
          },
          {
            "components": [],
            "type": "column",
            "md": 3,
            "key": "column",
            "index": 2,
            "conditional": {
              "show": null,
              "when": null
            },
            "input": false
          },
          {
            "md": 3,
            "type": "column",
            "input": false,
            "key": "column",
            "index": 3,
            "components": [
              {
                "type": "button",
                "disableOnInvalid": true,
                "block": true,
                "state": "",
                "theme": "primary",
                "key": "submit",
                "input": true
              }
            ]
          }
        ],
        "key": "columns2",
        "type": "columns",
        "input": false
      }
    ],
    "display": "form"
  },
  "attributes": {}
}
